{"version":3,"sources":["assets\\script\\room\\showrooms.js"],"names":["cc","Class","Component","properties","listrooms","type","Label","id","onLoad","then","data","uid","fetch","method","headers","Accept","response","json","string","Username","show_rooms","roomlist","i","length","Player1","Player2","JSON","stringify","start","update","dt"],"mappings":"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","sourceRoot":"/","sourcesContent":["import { receiveduserID } from \"../socket_connection\";\r\n\r\ncc.Class({\r\n  extends: cc.Component,\r\n  properties: {\r\n    listrooms: {\r\n      default: null,\r\n      type: cc.Label,\r\n    },\r\n    id: {\r\n      default: null,\r\n      type: cc.Label,\r\n    },\r\n  },\r\n  onLoad() {\r\n    // let PlayerInfo = cc.director\r\n    //   .getScene()\r\n    //   .getChildByName(\"PlayerInfo\")\r\n    //   .getComponent(\"PlayerInfo\");\r\n    receiveduserID().then((data) => {\r\n      let id = this.id;\r\n      let uid = data;\r\n      fetch(\"https://chinese-chess-vnp.herokuapp.com/api/player/\" + uid, {\r\n        method: \"GET\",\r\n        headers: {\r\n          Accept: \"application/json\",\r\n          \"Content-Type\": \"application/json\",\r\n        },\r\n      })\r\n        .then((response) => response.json())\r\n        .then(function (data) {\r\n          id.string = data.data.Username + \" #\" + uid;\r\n        });\r\n    });\r\n  },\r\n  show_rooms() {\r\n    let listrooms = this.listrooms;\r\n    roomlist = [];\r\n    fetch(\"https://chinese-chess-vnp.herokuapp.com/api/room\", {\r\n      method: \"GET\",\r\n      headers: {\r\n        Accept: \"application/json\",\r\n        \"Content-Type\": \"application/json\",\r\n      },\r\n    })\r\n      .then((response) => response.json())\r\n      // .then(function(body){\r\n      //     return body.text();\r\n      // })\r\n      .then(function (data) {\r\n        for (var i = 0; i < data.data.length; i++) {\r\n          if (data.data[i].Player1 != null && data.data[i].Player2 != null) {\r\n            roomlist +=\r\n              JSON.stringify(\"Room no \" + data.data[i].id + \" --- full\") + \"\\n\";\r\n          } else if (\r\n            data.data[i].Player1 != null &&\r\n            data.data[i].Player2 == null\r\n          ) {\r\n            roomlist +=\r\n              JSON.stringify(\"Room no \" + data.data[i].id + \" --- 1/2\") + \"\\n\";\r\n          } else if (\r\n            data.data[i].Player1 == null &&\r\n            data.data[i].Player2 != null\r\n          ) {\r\n            roomlist +=\r\n              JSON.stringify(\"Room no \" + data.data[i].id + \" --- 1/2\") + \"\\n\";\r\n          } else if (\r\n            data.data[i].Player1 == null &&\r\n            data.data[i].Player2 == null\r\n          ) {\r\n            roomlist +=\r\n              JSON.stringify(\"Room no \" + data.data[i].id + \" --- 0/2\") + \"\\n\";\r\n          }\r\n        }\r\n        listrooms.string = roomlist;\r\n      });\r\n  },\r\n  start() {\r\n    // receiveduserID()\r\n    //   .then((data) => {\r\n    //     console.log(data);\r\n    //     id.string = \"abc\";\r\n    //   })\r\n    //   .catch((error) => {\r\n    //     console.log(\"something wrongs\");\r\n    //   });\r\n  },\r\n  update(dt) {},\r\n});\r\n"]}