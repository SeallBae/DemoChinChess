{"version":3,"sources":["assets\\script\\changescene\\backtoroomlist.js"],"names":["cc","Class","Component","properties","onLoad","backtoroomlist","PlayerInfo","director","getScene","getChildByName","getComponent","RoomInfos","roomID","rid","then","data","console","log","Player1","Player2","uid","p2","loadScene","start","onDisable"],"mappings":";;;;;;AAOA;;AACA;;AARA;AACA;AACA;AACA;AACA;AACA;AAaAA,EAAE,CAACC,KAAH,CAAS;AACP,aAASD,EAAE,CAACE,SADL;AAGPC,EAAAA,UAAU,EAAE,EAHL;AAIPC,EAAAA,MAJO,oBAIE,CAAE,CAJJ;AAMPC,EAAAA,cANO,4BAMU;AACf,QAAIC,UAAU,GAAGN,EAAE,CAACO,QAAH,CACdC,QADc,GAEdC,cAFc,CAEC,YAFD,EAGdC,YAHc,CAGD,YAHC,CAAjB;AAIA,QAAIC,SAAS,GAAGX,EAAE,CAACO,QAAH,CACbC,QADa,GAEbC,cAFa,CAEE,WAFF,EAGbC,YAHa,CAGA,WAHA,CAAhB;AAKA,QAAIE,MAAM,GAAGD,SAAS,CAACE,GAAvB;AACA,uCAAYD,MAAZ,EAAoBE,IAApB,CAAyB,UAACC,IAAD,EAAU;AACjCC,MAAAA,OAAO,CAACC,GAAR,CAAYF,IAAZ;;AACA,UAAIA,IAAI,CAACA,IAAL,CAAUG,OAAV,IAAqB,IAArB,IAA6BH,IAAI,CAACA,IAAL,CAAUI,OAAV,IAAqB,IAAtD,EAA4D;AAC1D,YAAIJ,IAAI,CAACA,IAAL,CAAUG,OAAV,IAAqBZ,UAAU,CAACc,GAApC,EAAyC;AACvC,cAAIC,EAAE,GAAGN,IAAI,CAACA,IAAL,CAAUI,OAAnB;AACA,sDAAqBP,MAArB,EAA6BS,EAA7B,EAAiCP,IAAjC,CAAsC,UAACC,IAAD,EAAU;AAC9CC,YAAAA,OAAO,CAACC,GAAR,CAAYF,IAAZ;AACAJ,YAAAA,SAAS,CAACE,GAAV,GAAgB,IAAhB;AACAb,YAAAA,EAAE,CAACO,QAAH,CAAYe,SAAZ,CAAsB,OAAtB;AACD,WAJD;AAKD;;AACD,YAAIP,IAAI,CAACA,IAAL,CAAUI,OAAV,IAAqBb,UAAU,CAACc,GAApC,EAAyC;AACvC,sDAAqBP,GAArB,EAA0BC,IAA1B,CAA+B,UAACC,IAAD,EAAU;AACvCC,YAAAA,OAAO,CAACC,GAAR,CAAYF,IAAZ;AACAJ,YAAAA,SAAS,CAACE,GAAV,GAAgB,IAAhB;AACAb,YAAAA,EAAE,CAACO,QAAH,CAAYe,SAAZ,CAAsB,OAAtB;AACD,WAJD;AAKD;AACF;;AACD,UAAIP,IAAI,CAACA,IAAL,CAAUG,OAAV,IAAqB,IAArB,IAA6BH,IAAI,CAACA,IAAL,CAAUI,OAAV,IAAqB,IAAtD,EAA4D;AAC1D,gDAAiBP,MAAjB,EAAyBE,IAAzB,CAA8B,UAACC,IAAD,EAAU;AACtCC,UAAAA,OAAO,CAACC,GAAR,CAAYF,IAAZ;AACAJ,UAAAA,SAAS,CAACE,GAAV,GAAgB,IAAhB;AACAb,UAAAA,EAAE,CAACO,QAAH,CAAYe,SAAZ,CAAsB,OAAtB;AACD,SAJD;AAKD;;AACD,UAAIP,IAAI,CAACA,IAAL,CAAUG,OAAV,IAAqB,IAArB,IAA6BH,IAAI,CAACA,IAAL,CAAUI,OAAV,IAAqB,IAAtD,EAA4D;AAC1D,gDAAiBP,MAAjB,EAAyBE,IAAzB,CAA8B,UAACC,IAAD,EAAU;AACtCC,UAAAA,OAAO,CAACC,GAAR,CAAYF,IAAZ;AACAJ,UAAAA,SAAS,CAACE,GAAV,GAAgB,IAAhB;AACAb,UAAAA,EAAE,CAACO,QAAH,CAAYe,SAAZ,CAAsB,OAAtB;AACD,SAJD;AAKD;AACF,KAjCD;AAkCD,GAnDM;AAoDPC,EAAAA,KApDO,mBAoDC,CAAE,CApDH;AAqDPC,EAAAA,SArDO,uBAqDK,CAAE,CArDP,CAsDP;;AAtDO,CAAT","sourceRoot":"/","sourcesContent":["// Learn cc.Class:\r\n//  - https://docs.cocos.com/creator/manual/en/scripting/class.html\r\n// Learn Attribute:\r\n//  - https://docs.cocos.com/creator/manual/en/scripting/reference/attributes.html\r\n// Learn life-cycle callbacks:\r\n//  - https://docs.cocos.com/creator/manual/en/scripting/life-cycle-callbacks.html\r\n\r\nimport { receivedroomID } from \"../socket_connection\";\r\nimport {\r\n  getroombyID,\r\n  joinroombyIDasp1,\r\n  joinroombyIDasp2,\r\n  quitfullroombyIDasp1,\r\n  quitfullroombyIDasp2,\r\n  quitroombyIDasp1,\r\n  quitroombyIDasp2,\r\n} from \"../axios_connection\";\r\n\r\ncc.Class({\r\n  extends: cc.Component,\r\n\r\n  properties: {},\r\n  onLoad() {},\r\n\r\n  backtoroomlist() {\r\n    var PlayerInfo = cc.director\r\n      .getScene()\r\n      .getChildByName(\"PlayerInfo\")\r\n      .getComponent(\"PlayerInfo\");\r\n    var RoomInfos = cc.director\r\n      .getScene()\r\n      .getChildByName(\"RoomInfos\")\r\n      .getComponent(\"RoomInfos\");\r\n\r\n    let roomID = RoomInfos.rid;\r\n    getroombyID(roomID).then((data) => {\r\n      console.log(data);\r\n      if (data.data.Player1 != null && data.data.Player2 != null) {\r\n        if (data.data.Player1 == PlayerInfo.uid) {\r\n          let p2 = data.data.Player2;\r\n          quitfullroombyIDasp1(roomID, p2).then((data) => {\r\n            console.log(data);\r\n            RoomInfos.rid = null;\r\n            cc.director.loadScene(\"rooms\");\r\n          });\r\n        }\r\n        if (data.data.Player2 == PlayerInfo.uid) {\r\n          quitfullroombyIDasp2(rid).then((data) => {\r\n            console.log(data);\r\n            RoomInfos.rid = null;\r\n            cc.director.loadScene(\"rooms\");\r\n          });\r\n        }\r\n      }\r\n      if (data.data.Player1 == null && data.data.Player2 != null) {\r\n        quitroombyIDasp2(roomID).then((data) => {\r\n          console.log(data);\r\n          RoomInfos.rid = null;\r\n          cc.director.loadScene(\"rooms\");\r\n        });\r\n      }\r\n      if (data.data.Player1 != null && data.data.Player2 == null) {\r\n        quitroombyIDasp1(roomID).then((data) => {\r\n          console.log(data);\r\n          RoomInfos.rid = null;\r\n          cc.director.loadScene(\"rooms\");\r\n        });\r\n      }\r\n    });\r\n  },\r\n  start() {},\r\n  onDisable() {},\r\n  // update (dt) {},\r\n});\r\n"]}