
                (function() {
                    var nodeEnv = typeof require !== 'undefined' && typeof process !== 'undefined';
                    var __module = nodeEnv ? module : {exports:{}};
                    var __filename = 'preview-scripts/assets/script/board/touchmove.js';
                    var __require = nodeEnv ? function (request) {
                        return cc.require(request);
                    } : function (request) {
                        return __quick_compile_project__.require(request, __filename);
                    };
                    function __define (exports, require, module) {
                        if (!nodeEnv) {__quick_compile_project__.registerModule(__filename, module);}"use strict";
cc._RF.push(module, 'add97JwDi1EwI+ETWKdjCct', 'touchmove');
// script/board/touchmove.js

"use strict";

var _socket_connection = require("../socket_connection");

// let socket = io("http://localhost:3000", {transports : ['websocket'],
//     query: {
//       userId: 1,
//       cc:"cc",
//     },
//   });
// const { io } = require("socket.io-client");
// import * as io from "socket.io-client";
// let socket = io.connect('http://localhost:3000/');
//
cc.Class({
  "extends": cc.Component,
  properties: {
    place: {
      "default": null,
      type: cc.Node
    },
    redchess: {
      "default": null,
      type: cc.Node
    },
    blackchess: {
      "default": null,
      type: cc.Node
    },
    map: {
      "default": null,
      type: cc.Node
    },
    deadredchess: {
      "default": null,
      type: cc.Node
    },
    deadblackchess: {
      "default": null,
      type: cc.Node
    },
    movecodelist: {
      "default": null,
      type: cc.Node
    },
    updateall: {
      "default": null,
      type: cc.Node
    } // socket: io.connect("http://localhost:3000", { transports : ['websocket'] }),

  },
  redtouchmove: function redtouchmove(i) {
    var updateall = this.updateall.getComponent("update");
    var map = this.map.getComponent("boardinfo");
    var deadblackchess = this.deadblackchess;
    var place = this.place;
    var posmove = place.getChildren();
    var redchess = this.redchess;
    var redc = redchess.getChildren();
    var blackchess = this.blackchess;
    var blackc = blackchess.getChildren();
    redc.parent = place;
    blackc.parent = place;

    if (posmove[i].active == true) {
      posmove[i].on("touchstart", function () {
        var _this = this;

        if (self.node.isChildOf(redchess)) {
          var kill = 0;

          for (var k = 0; k < blackc.length; k++) {
            if (blackc[k].x == this.x && blackc[k].y == this.y) {
              (0, _socket_connection.senddeadchess)({
                name: blackc[k].name
              });
              kill++;
              (0, _socket_connection.sendchessPosition)(map.movecode);
              (0, _socket_connection.receivedchessPosition)().then(function (data) {
                console.log(data);
                map.movecode = data;
                map.movecode.push({
                  name: self.node.name,
                  xed: self.node.x,
                  yed: self.node.y,
                  x: _this.x,
                  y: _this.y
                });
              }).then(function (data) {
                console.table(map.movecode);
                (0, _socket_connection.sendchessPosition)(map.movecode);
              }); // console.log(self.node.name, this.x, this.y);
              // const data = receivedchessPosition();
              // console.log(data);

              redchess.pauseSystemEvents(true);
              this.setScale(1, 1);
              this.off("touchstart", this["function"], posmove[i]);
              break;
            }
          }

          if (kill == 0) {
            (0, _socket_connection.sendchessPosition)(map.movecode);
            (0, _socket_connection.receivedchessPosition)().then(function (data) {
              map.movecode = data;
              map.movecode.push({
                name: self.node.name,
                xed: self.node.x,
                yed: self.node.y,
                x: _this.x,
                y: _this.y
              });
            }).then(function (data) {
              console.table(map.movecode);
              (0, _socket_connection.sendchessPosition)(map.movecode);
            });
            this.setScale(1, 1);
            this.off("touchstart", this["function"], posmove[i]);
          }
        }

        for (var reset = 0; reset < posmove.length; reset++) {
          posmove[reset].setScale(1, 1);
          posmove[reset].active = false;
        }
      }, posmove[i]);
    }
  },
  blacktouchmove: function blacktouchmove(i) {
    var updateall = this.updateall.getComponent("update");
    var map = this.map.getComponent("boardinfo");
    var deadredchess = this.deadredchess;
    var place = this.place;
    var posmove = place.getChildren();
    var redchess = this.redchess;
    var redc = redchess.getChildren();
    var blackchess = this.blackchess;
    var blackc = blackchess.getChildren();
    redc.parent = place;
    blackc.parent = place;

    if (posmove[i].active == true) {
      posmove[i].on("touchstart", function () {
        var _this2 = this;

        if (self.node.isChildOf(blackchess)) {
          var kill = 0;

          for (var j = 0; j < redc.length; j++) {
            if (redc[j].x == this.x && redc[j].y == this.y) {
              (0, _socket_connection.senddeadchess)({
                name: redc[j].name
              });
              kill++;
              (0, _socket_connection.sendchessPosition)(map.movecode);
              (0, _socket_connection.receivedchessPosition)().then(function (data) {
                console.log(data);
                map.movecode = data;
                console.log(map.movecode);
                map.movecode.push({
                  name: self.node.name,
                  xed: self.node.x,
                  yed: self.node.y,
                  x: _this2.x,
                  y: _this2.y
                });
              }).then(function (data) {
                console.table(map.movecode);
                (0, _socket_connection.sendchessPosition)(map.movecChijode);
              });
              this.setScale(1, 1);
              this.off("touchstart", this["function"], posmove[i]);
              break;
            }
          }

          if (kill == 0) {
            (0, _socket_connection.sendchessPosition)(map.movecode);
            (0, _socket_connection.receivedchessPosition)().then(function (data) {
              map.movecode = data;
              map.movecode.push({
                name: self.node.name,
                xed: self.node.x,
                yed: self.node.y,
                x: _this2.x,
                y: _this2.y
              });
            }).then(function (data) {
              console.table(map.movecode);
              (0, _socket_connection.sendchessPosition)(map.movecode);
            });
            blackchess.pauseSystemEvents(true);
            this.setScale(1, 1);
            this.off("touchstart", this["function"], posmove[i]);
          }
        }

        for (var reset = 0; reset < posmove.length; reset++) {
          posmove[reset].setScale(1, 1);
          posmove[reset].active = false;
        }
      }, posmove[i]);
    }
  },
  // newposition(name, x, y){
  //     return 'name', x, y;
  // },
  start: function start() {},
  onLoad: function onLoad() {},
  update: function update(dt) {}
});

cc._RF.pop();
                    }
                    if (nodeEnv) {
                        __define(__module.exports, __require, __module);
                    }
                    else {
                        __quick_compile_project__.registerModuleFunc(__filename, function () {
                            __define(__module.exports, __require, __module);
                        });
                    }
                })();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImFzc2V0c1xcc2NyaXB0XFxib2FyZFxcdG91Y2htb3ZlLmpzIl0sIm5hbWVzIjpbImNjIiwiQ2xhc3MiLCJDb21wb25lbnQiLCJwcm9wZXJ0aWVzIiwicGxhY2UiLCJ0eXBlIiwiTm9kZSIsInJlZGNoZXNzIiwiYmxhY2tjaGVzcyIsIm1hcCIsImRlYWRyZWRjaGVzcyIsImRlYWRibGFja2NoZXNzIiwibW92ZWNvZGVsaXN0IiwidXBkYXRlYWxsIiwicmVkdG91Y2htb3ZlIiwiaSIsImdldENvbXBvbmVudCIsInBvc21vdmUiLCJnZXRDaGlsZHJlbiIsInJlZGMiLCJibGFja2MiLCJwYXJlbnQiLCJhY3RpdmUiLCJvbiIsInNlbGYiLCJub2RlIiwiaXNDaGlsZE9mIiwia2lsbCIsImsiLCJsZW5ndGgiLCJ4IiwieSIsIm5hbWUiLCJtb3ZlY29kZSIsInRoZW4iLCJkYXRhIiwiY29uc29sZSIsImxvZyIsInB1c2giLCJ4ZWQiLCJ5ZWQiLCJ0YWJsZSIsInBhdXNlU3lzdGVtRXZlbnRzIiwic2V0U2NhbGUiLCJvZmYiLCJyZXNldCIsImJsYWNrdG91Y2htb3ZlIiwiaiIsIm1vdmVjQ2hpam9kZSIsInN0YXJ0Iiwib25Mb2FkIiwidXBkYXRlIiwiZHQiXSwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7Ozs7Ozs7O0FBT0E7O0FBUEE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBVUE7QUFDQTtBQUNBO0FBQ0E7QUFDQUEsRUFBRSxDQUFDQyxLQUFILENBQVM7QUFDUCxhQUFTRCxFQUFFLENBQUNFLFNBREw7QUFFUEMsRUFBQUEsVUFBVSxFQUFFO0FBQ1ZDLElBQUFBLEtBQUssRUFBRTtBQUNMLGlCQUFTLElBREo7QUFFTEMsTUFBQUEsSUFBSSxFQUFFTCxFQUFFLENBQUNNO0FBRkosS0FERztBQUtWQyxJQUFBQSxRQUFRLEVBQUU7QUFDUixpQkFBUyxJQUREO0FBRVJGLE1BQUFBLElBQUksRUFBRUwsRUFBRSxDQUFDTTtBQUZELEtBTEE7QUFTVkUsSUFBQUEsVUFB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c29ja2V0ID0gaW8oXCJodHRwOi8vbG9jYWxob3N0OjMwMDBcIiwge3RyYW5zcG9ydHMgOiBbJ3dlYnNvY2tldCddLFxyXG4vLyAgICAgcXVlcnk6IHtcclxuLy8gICAgICAgdXNlcklkOiAxLFxyXG4vLyAgICAgICBjYzpcImNjXCIsXHJcbi8vICAgICB9LFxyXG4vLyAgIH0pO1xyXG5cclxuaW1wb3J0IHtcclxuICByZWNlaXZlZGNoZXNzUG9zaXRpb24sXHJcbiAgc2VuZGNoZXNzUG9zaXRpb24sXHJcbiAgc2VuZGRlYWRjaGVzcyxcclxuICByZWNlaXZlZGRlYWRjaGVzcyxcclxuICBzZW5kc3RhdGUsXHJcbn0gZnJvbSBcIi4uL3NvY2tldF9jb25uZWN0aW9uXCI7XHJcblxyXG4vLyBjb25zdCB7IGlvIH0gPSByZXF1aXJlKFwic29ja2V0LmlvLWNsaWVudFwiKTtcclxuLy8gaW1wb3J0ICogYXMgaW8gZnJvbSBcInNvY2tldC5pby1jbGllbnRcIjtcclxuLy8gbGV0IHNvY2tldCA9IGlvLmNvbm5lY3QoJ2h0dHA6Ly9sb2NhbGhvc3Q6MzAwMC8nKTtcclxuLy9cclxuY2MuQ2xhc3Moe1xyXG4gIGV4dGVuZHM6IGNjLkNvbXBvbmVudCxcclxuICBwcm9wZXJ0aWVzOiB7XHJcbiAgICBwbGFjZToge1xyXG4gICAgICBkZWZhdWx0OiBudWxsLFxyXG4gICAgICB0eXBlOiBjYy5Ob2RlLFxyXG4gICAgfSxcclxuICAgIHJlZGNoZXNzOiB7XHJcbiAgICAgIGRlZmF1bHQ6IG51bGwsXHJcbiAgICAgIHR5cGU6IGNjLk5vZGUsXHJcbiAgICB9LFxyXG4gICAgYmxhY2tjaGVzczoge1xyXG4gICAgICBkZWZhdWx0OiBudWxsLFxyXG4gICAgICB0eXBlOiBjYy5Ob2RlLFxyXG4gICAgfSxcclxuICAgIG1hcDoge1xyXG4gICAgICBkZWZhdWx0OiBudWxsLFxyXG4gICAgICB0eXBlOiBjYy5Ob2RlLFxyXG4gICAgfSxcclxuICAgIGRlYWRyZWRjaGVzczoge1xyXG4gICAgICBkZWZhdWx0OiBudWxsLFxyXG4gICAgICB0eXBlOiBjYy5Ob2RlLFxyXG4gICAgfSxcclxuICAgIGRlYWRibGFja2NoZXNzOiB7XHJcbiAgICAgIGRlZmF1bHQ6IG51bGwsXHJcbiAgICAgIHR5cGU6IGNjLk5vZGUsXHJcbiAgICB9LFxyXG4gICAgbW92ZWNvZGVsaXN0OiB7XHJcbiAgICAgIGRlZmF1bHQ6IG51bGwsXHJcbiAgICAgIHR5cGU6IGNjLk5vZGUsXHJcbiAgICB9LFxyXG4gICAgdXBkYXRlYWxsOiB7XHJcbiAgICAgIGRlZmF1bHQ6IG51bGwsXHJcbiAgICAgIHR5cGU6IGNjLk5vZGUsXHJcbiAgICB9LFxyXG4gICAgLy8gc29ja2V0OiBpby5jb25uZWN0KFwiaHR0cDovL2xvY2FsaG9zdDozMDAwXCIsIHsgdHJhbnNwb3J0cyA6IFsnd2Vic29ja2V0J10gfSksXHJcbiAgfSxcclxuICByZWR0b3VjaG1vdmUoaSkge1xyXG4gICAgbGV0IHVwZGF0ZWFsbCA9IHRoaXMudXBkYXRlYWxsLmdldENvbXBvbmVudChcInVwZGF0ZVwiKTtcclxuICAgIGxldCBtYXAgPSB0aGlzLm1hcC5nZXRDb21wb25lbnQoXCJib2FyZGluZm9cIik7XHJcbiAgICBsZXQgZGVhZGJsYWNrY2hlc3MgPSB0aGlzLmRlYWRibGFja2NoZXNzO1xyXG4gICAgdmFyIHBsYWNlID0gdGhpcy5wbGFjZTtcclxuICAgIHZhciBwb3Ntb3ZlID0gcGxhY2UuZ2V0Q2hpbGRyZW4oKTtcclxuICAgIHZhciByZWRjaGVzcyA9IHRoaXMucmVkY2hlc3M7XHJcbiAgICB2YXIgcmVkYyA9IHJlZGNoZXNzLmdldENoaWxkcmVuKCk7XHJcbiAgICB2YXIgYmxhY2tjaGVzcyA9IHRoaXMuYmxhY2tjaGVzcztcclxuICAgIHZhciBibGFja2MgPSBibGFja2NoZXNzLmdldENoaWxkcmVuKCk7XHJcbiAgICByZWRjLnBhcmVudCA9IHBsYWNlO1xyXG4gICAgYmxhY2tjLnBhcmVudCA9IHBsYWNlO1xyXG5cclxuICAgIGlmIChwb3Ntb3ZlW2ldLmFjdGl2ZSA9PSB0cnVlKSB7XHJcbiAgICAgIHBvc21vdmVbaV0ub24oXHJcbiAgICAgICAgXCJ0b3VjaHN0YXJ0XCIsXHJcbiAgICAgICAgZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgaWYgKHNlbGYubm9kZS5pc0NoaWxkT2YocmVkY2hlc3MpKSB7XHJcbiAgICAgICAgICAgIHZhciBraWxsID0gMDtcclxuICAgICAgICAgICAgZm9yICh2YXIgayA9IDA7IGsgPCBibGFja2MubGVuZ3RoOyBrKyspIHtcclxuICAgICAgICAgICAgICBpZiAoYmxhY2tjW2tdLnggPT0gdGhpcy54ICYmIGJsYWNrY1trXS55ID09IHRoaXMueSkge1xyXG4gICAgICAgICAgICAgICAgc2VuZGRlYWRjaGVzcyh7XHJcbiAgICAgICAgICAgICAgICAgIG5hbWU6IGJsYWNrY1trXS5uYW1lLFxyXG4gICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgICAgICBraWxsKys7XHJcbiAgICAgICAgICAgICAgICBzZW5kY2hlc3NQb3NpdGlvbihtYXAubW92ZWNvZGUpO1xyXG4gICAgICAgICAgICAgICAgcmVjZWl2ZWRjaGVzc1Bvc2l0aW9uKClcclxuICAgICAgICAgICAgICAgICAgLnRoZW4oKGRhdGEpID0+IHtcclxuICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhkYXRhKTtcclxuICAgICAgICAgICAgICAgICAgICBtYXAubW92ZWNvZGUgPSBkYXRhO1xyXG4gICAgICAgICAgICAgICAgICAgIG1hcC5tb3ZlY29kZS5wdXNoKHtcclxuICAgICAgICAgICAgICAgICAgICAgIG5hbWU6IHNlbGYubm9kZS5uYW1lLFxyXG4gICAgICAgICAgICAgICAgICAgICAgeGVkOiBzZWxmLm5vZGUueCxcclxuICAgICAgICAgICAgICAgICAgICAgIHllZDogc2VsZi5ub2RlLnksXHJcbiAgICAgICAgICAgICAgICAgICAgICB4OiB0aGlzLngsXHJcbiAgICAgICAgICAgICAgICAgICAgICB5OiB0aGlzLnksXHJcbiAgICAgICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgICAgICAgIH0pXHJcbiAgICAgICAgICAgICAgICAgIC50aGVuKChkYXRhKSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgY29uc29sZS50YWJsZShtYXAubW92ZWNvZGUpO1xyXG4gICAgICAgICAgICAgICAgICAgIHNlbmRjaGVzc1Bvc2l0aW9uKG1hcC5tb3ZlY29kZSk7XHJcbiAgICAgICAgICAgICAgICAgIH0pO1xyXG5cclxuICAgICAgICAgICAgICAgIC8vIGNvbnNvbGUubG9nKHNlbGYubm9kZS5uYW1lLCB0aGlzLngsIHRoaXMueSk7XHJcbiAgICAgICAgICAgICAgICAvLyBjb25zdCBkYXRhID0gcmVjZWl2ZWRjaGVzc1Bvc2l0aW9uKCk7XHJcbiAgICAgICAgICAgICAgICAvLyBjb25zb2xlLmxvZyhkYXRhKTtcclxuICAgICAgICAgICAgICAgIHJlZGNoZXNzLnBhdXNlU3lzdGVtRXZlbnRzKHRydWUpO1xyXG4gICAgICAgICAgICAgICAgdGhpcy5zZXRTY2FsZSgxLCAxKTtcclxuICAgICAgICAgICAgICAgIHRoaXMub2ZmKFwidG91Y2hzdGFydFwiLCB0aGlzLmZ1bmN0aW9uLCBwb3Ntb3ZlW2ldKTtcclxuICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBpZiAoa2lsbCA9PSAwKSB7XHJcbiAgICAgICAgICAgICAgc2VuZGNoZXNzUG9zaXRpb24obWFwLm1vdmVjb2RlKTtcclxuICAgICAgICAgICAgICByZWNlaXZlZGNoZXNzUG9zaXRpb24oKVxyXG4gICAgICAgICAgICAgICAgLnRoZW4oKGRhdGEpID0+IHtcclxuICAgICAgICAgICAgICAgICAgbWFwLm1vdmVjb2RlID0gZGF0YTtcclxuICAgICAgICAgICAgICAgICAgbWFwLm1vdmVjb2RlLnB1c2goe1xyXG4gICAgICAgICAgICAgICAgICAgIG5hbWU6IHNlbGYubm9kZS5uYW1lLFxyXG4gICAgICAgICAgICAgICAgICAgIHhlZDogc2VsZi5ub2RlLngsXHJcbiAgICAgICAgICAgICAgICAgICAgeWVkOiBzZWxmLm5vZGUueSxcclxuICAgICAgICAgICAgICAgICAgICB4OiB0aGlzLngsXHJcbiAgICAgICAgICAgICAgICAgICAgeTogdGhpcy55LFxyXG4gICAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgICAgIH0pXHJcbiAgICAgICAgICAgICAgICAudGhlbigoZGF0YSkgPT4ge1xyXG4gICAgICAgICAgICAgICAgICBjb25zb2xlLnRhYmxlKG1hcC5tb3ZlY29kZSk7XHJcbiAgICAgICAgICAgICAgICAgIHNlbmRjaGVzc1Bvc2l0aW9uKG1hcC5tb3ZlY29kZSk7XHJcbiAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgICB0aGlzLnNldFNjYWxlKDEsIDEpO1xyXG4gICAgICAgICAgICAgIHRoaXMub2ZmKFwidG91Y2hzdGFydFwiLCB0aGlzLmZ1bmN0aW9uLCBwb3Ntb3ZlW2ldKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgfVxyXG4gICAgICAgICAgZm9yICh2YXIgcmVzZXQgPSAwOyByZXNldCA8IHBvc21vdmUubGVuZ3RoOyByZXNldCsrKSB7XHJcbiAgICAgICAgICAgIHBvc21vdmVbcmVzZXRdLnNldFNjYWxlKDEsIDEpO1xyXG4gICAgICAgICAgICBwb3Ntb3ZlW3Jlc2V0XS5hY3RpdmUgPSBmYWxzZTtcclxuICAgICAgICAgIH1cclxuICAgICAgICB9LFxyXG4gICAgICAgIHBvc21vdmVbaV1cclxuICAgICAgKTtcclxuICAgIH1cclxuICB9LFxyXG4gIGJsYWNrdG91Y2htb3ZlKGkpIHtcclxuICAgIGxldCB1cGRhdGVhbGwgPSB0aGlzLnVwZGF0ZWFsbC5nZXRDb21wb25lbnQoXCJ1cGRhdGVcIik7XHJcbiAgICBsZXQgbWFwID0gdGhpcy5tYXAuZ2V0Q29tcG9uZW50KFwiYm9hcmRpbmZvXCIpO1xyXG4gICAgbGV0IGRlYWRyZWRjaGVzcyA9IHRoaXMuZGVhZHJlZGNoZXNzO1xyXG4gICAgdmFyIHBsYWNlID0gdGhpcy5wbGFjZTtcclxuICAgIHZhciBwb3Ntb3ZlID0gcGxhY2UuZ2V0Q2hpbGRyZW4oKTtcclxuICAgIHZhciByZWRjaGVzcyA9IHRoaXMucmVkY2hlc3M7XHJcbiAgICB2YXIgcmVkYyA9IHJlZGNoZXNzLmdldENoaWxkcmVuKCk7XHJcbiAgICB2YXIgYmxhY2tjaGVzcyA9IHRoaXMuYmxhY2tjaGVzcztcclxuICAgIHZhciBibGFja2MgPSBibGFja2NoZXNzLmdldENoaWxkcmVuKCk7XHJcbiAgICByZWRjLnBhcmVudCA9IHBsYWNlO1xyXG4gICAgYmxhY2tjLnBhcmVudCA9IHBsYWNlO1xyXG4gICAgaWYgKHBvc21vdmVbaV0uYWN0aXZlID09IHRydWUpIHtcclxuICAgICAgcG9zbW92ZVtpXS5vbihcclxuICAgICAgICBcInRvdWNoc3RhcnRcIixcclxuICAgICAgICBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICBpZiAoc2VsZi5ub2RlLmlzQ2hpbGRPZihibGFja2NoZXNzKSkge1xyXG4gICAgICAgICAgICB2YXIga2lsbCA9IDA7XHJcbiAgICAgICAgICAgIGZvciAodmFyIGogPSAwOyBqIDwgcmVkYy5sZW5ndGg7IGorKykge1xyXG4gICAgICAgICAgICAgIGlmIChyZWRjW2pdLnggPT0gdGhpcy54ICYmIHJlZGNbal0ueSA9PSB0aGlzLnkpIHtcclxuICAgICAgICAgICAgICAgIHNlbmRkZWFkY2hlc3Moe1xyXG4gICAgICAgICAgICAgICAgICBuYW1lOiByZWRjW2pdLm5hbWUsXHJcbiAgICAgICAgICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgICAgICAgICBraWxsKys7XHJcbiAgICAgICAgICAgICAgICBzZW5kY2hlc3NQb3NpdGlvbihtYXAubW92ZWNvZGUpO1xyXG4gICAgICAgICAgICAgICAgcmVjZWl2ZWRjaGVzc1Bvc2l0aW9uKClcclxuICAgICAgICAgICAgICAgICAgLnRoZW4oKGRhdGEpID0+IHtcclxuICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhkYXRhKTtcclxuICAgICAgICAgICAgICAgICAgICBtYXAubW92ZWNvZGUgPSBkYXRhO1xyXG4gICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKG1hcC5tb3ZlY29kZSk7XHJcbiAgICAgICAgICAgICAgICAgICAgbWFwLm1vdmVjb2RlLnB1c2goe1xyXG4gICAgICAgICAgICAgICAgICAgICAgbmFtZTogc2VsZi5ub2RlLm5hbWUsXHJcbiAgICAgICAgICAgICAgICAgICAgICB4ZWQ6IHNlbGYubm9kZS54LFxyXG4gICAgICAgICAgICAgICAgICAgICAgeWVkOiBzZWxmLm5vZGUueSxcclxuICAgICAgICAgICAgICAgICAgICAgIHg6IHRoaXMueCxcclxuICAgICAgICAgICAgICAgICAgICAgIHk6IHRoaXMueSxcclxuICAgICAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgICAgICAgfSlcclxuICAgICAgICAgICAgICAgICAgLnRoZW4oKGRhdGEpID0+IHtcclxuICAgICAgICAgICAgICAgICAgICBjb25zb2xlLnRhYmxlKG1hcC5tb3ZlY29kZSk7XHJcbiAgICAgICAgICAgICAgICAgICAgc2VuZGNoZXNzUG9zaXRpb24obWFwLm1vdmVjQ2hpam9kZSk7XHJcbiAgICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICAgICAgdGhpcy5zZXRTY2FsZSgxLCAxKTtcclxuICAgICAgICAgICAgICAgIHRoaXMub2ZmKFwidG91Y2hzdGFydFwiLCB0aGlzLmZ1bmN0aW9uLCBwb3Ntb3ZlW2ldKTtcclxuICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBpZiAoa2lsbCA9PSAwKSB7XHJcbiAgICAgICAgICAgICAgc2VuZGNoZXNzUG9zaXRpb24obWFwLm1vdmVjb2RlKTtcclxuICAgICAgICAgICAgICByZWNlaXZlZGNoZXNzUG9zaXRpb24oKVxyXG4gICAgICAgICAgICAgICAgLnRoZW4oKGRhdGEpID0+IHtcclxuICAgICAgICAgICAgICAgICAgbWFwLm1vdmVjb2RlID0gZGF0YTtcclxuICAgICAgICAgICAgICAgICAgbWFwLm1vdmVjb2RlLnB1c2goe1xyXG4gICAgICAgICAgICAgICAgICAgIG5hbWU6IHNlbGYubm9kZS5uYW1lLFxyXG4gICAgICAgICAgICAgICAgICAgIHhlZDogc2VsZi5ub2RlLngsXHJcbiAgICAgICAgICAgICAgICAgICAgeWVkOiBzZWxmLm5vZGUueSxcclxuICAgICAgICAgICAgICAgICAgICB4OiB0aGlzLngsXHJcbiAgICAgICAgICAgICAgICAgICAgeTogdGhpcy55LFxyXG4gICAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgICAgIH0pXHJcbiAgICAgICAgICAgICAgICAudGhlbigoZGF0YSkgPT4ge1xyXG4gICAgICAgICAgICAgICAgICBjb25zb2xlLnRhYmxlKG1hcC5tb3ZlY29kZSk7XHJcbiAgICAgICAgICAgICAgICAgIHNlbmRjaGVzc1Bvc2l0aW9uKG1hcC5tb3ZlY29kZSk7XHJcbiAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgICBibGFja2NoZXNzLnBhdXNlU3lzdGVtRXZlbnRzKHRydWUpO1xyXG4gICAgICAgICAgICAgIHRoaXMuc2V0U2NhbGUoMSwgMSk7XHJcbiAgICAgICAgICAgICAgdGhpcy5vZmYoXCJ0b3VjaHN0YXJ0XCIsIHRoaXMuZnVuY3Rpb24sIHBvc21vdmVbaV0pO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgICBmb3IgKHZhciByZXNldCA9IDA7IHJlc2V0IDwgcG9zbW92ZS5sZW5ndGg7IHJlc2V0KyspIHtcclxuICAgICAgICAgICAgcG9zbW92ZVtyZXNldF0uc2V0U2NhbGUoMSwgMSk7XHJcbiAgICAgICAgICAgIHBvc21vdmVbcmVzZXRdLmFjdGl2ZSA9IGZhbHNlO1xyXG4gICAgICAgICAgfVxyXG4gICAgICAgIH0sXHJcbiAgICAgICAgcG9zbW92ZVtpXVxyXG4gICAgICApO1xyXG4gICAgfVxyXG4gIH0sXHJcbiAgLy8gbmV3cG9zaXRpb24obmFtZSwgeCwgeSl7XHJcbiAgLy8gICAgIHJldHVybiAnbmFtZScsIHgsIHk7XHJcbiAgLy8gfSxcclxuICBzdGFydCgpIHt9LFxyXG4gIG9uTG9hZCgpIHt9LFxyXG4gIHVwZGF0ZShkdCkge30sXHJcbn0pO1xyXG4iXX0=