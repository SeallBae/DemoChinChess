{"version":3,"sources":["assets\\script\\room\\showrooms.js"],"names":["cc","Class","Component","properties","listrooms","type","Label","id","onLoad","then","data","uid","name","namedisplay","string","Username","show_rooms","roomlist","fetch","method","headers","Accept","response","json","i","length","Player1","Player2","JSON","stringify","start","update","dt"],"mappings":"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","sourceRoot":"/","sourcesContent":["import { receiveduserID } from \"../socket_connection\";\r\nimport {receivedUserbyID} from \"../axios_connection\";\r\n// const fetch = require('node-fetch')\r\n\r\ncc.Class({\r\n  extends: cc.Component,\r\n  properties: {\r\n    listrooms: {\r\n      default: null,\r\n      type: cc.Label,\r\n    },\r\n    id: {\r\n      default: null,\r\n      type: cc.Label,\r\n    },\r\n  },\r\n  onLoad() {\r\n    let id = this.id;\r\n    receiveduserID().then((data) => {\r\n      uid = data;\r\n      let name = this.namedisplay;\r\n      receivedUserbyID(uid).then(data=>{\r\n        id.string = data.data.Username + \" #\" + uid;\r\n      })\r\n    });\r\n  },\r\n  show_rooms() {\r\n    let listrooms = this.listrooms;\r\n    roomlist = [];\r\n    fetch(\"https://chinese-chess-vnp.herokuapp.com/api/room\", {\r\n      method: \"GET\",\r\n      headers: {\r\n        Accept: \"application/json\",\r\n        \"Content-Type\": \"application/json\",\r\n      },\r\n    })\r\n      .then((response) => response.json())\r\n      // .then(function(body){\r\n      //     return body.text();\r\n      // })\r\n      .then(function (data) {\r\n        for (var i = 0; i < data.data.length; i++) {\r\n          if (data.data[i].Player1 != null && data.data[i].Player2 != null) {\r\n            roomlist +=\r\n              JSON.stringify(\"Room no \" + data.data[i].id + \" --- full\") + \"\\n\";\r\n          } else if (\r\n            data.data[i].Player1 != null &&\r\n            data.data[i].Player2 == null\r\n          ) {\r\n            roomlist +=\r\n              JSON.stringify(\"Room no \" + data.data[i].id + \" --- 1/2\") + \"\\n\";\r\n          } else if (\r\n            data.data[i].Player1 == null &&\r\n            data.data[i].Player2 != null\r\n          ) {\r\n            roomlist +=\r\n              JSON.stringify(\"Room no \" + data.data[i].id + \" --- 1/2\") + \"\\n\";\r\n          } else if (\r\n            data.data[i].Player1 == null &&\r\n            data.data[i].Player2 == null\r\n          ) {\r\n            roomlist +=\r\n              JSON.stringify(\"Room no \" + data.data[i].id + \" --- 0/2\") + \"\\n\";\r\n          }\r\n        }\r\n        listrooms.string = roomlist;\r\n      });\r\n  },\r\n  start() {\r\n    // receiveduserID()\r\n    //   .then((data) => {\r\n    //     console.log(data);\r\n    //     id.string = \"abc\";\r\n    //   })\r\n    //   .catch((error) => {\r\n    //     console.log(\"something wrongs\");\r\n    //   });\r\n  },\r\n  update(dt) {},\r\n});\r\n"]}